---
id: api-overview
title: API
sidebar_label: API
slug: /api-overview
---

import TooltipWithDefaults from '../src/components/TooltipWithDefaults';
import Tip from '../src/components/Tip';

Interfacing with the Unum ID API lets your company act as one or more <Tip type="issuer">issuers</Tip> and/or <Tip  type="verifier">verifiers</Tip>.

**Before you begin:** You need to be registered as an Unum ID customer, and you need to register at least one issuer or verifier. (You can register zero to many of each, depending on your use case.) For API keys to use with this API please reach out to support@unumid.co. _Our self service dashboard is coming soon!_

:::note
Postman documentation of this API can be found [here](https://docs.api.unumid.co/).
:::

## Overview
The Unum ID API is a RESTful API that allows you to act as an <Tip type="issuer"/> or <Tip type="verifier"/>. It is an interface to the Unum ID identity data network.

### Environments
Upon the ApiKey creation you will receive one for each environment: Sandbox and Production. We encourage that all integration work be done against the Sandbox environment. 

The base url for the Sandbox API is `https://api.sandbox-unumid.co`.<br/>
The base url for the Production API is `https://api.unumid.co`.

### Authentication
Every request detailed below requires an Unum ID ApiKey as an Authorization Bearer token header, which is used to authenticate requests to the Unum ID cloud.

:::caution
Due to the sensitive nature of the ApiKey please only leverage from a secure backend service environment.
:::

## Functionality
You can use the API methods to create <Tip type="request">requests</Tip> for and retrieve user data in the form of <Tip type="presentation">presentations</Tip>. It can also be used to issue <Tip type="credential">credentials</Tip> of user data and update previously issued credential statuses, e.g. invalidate.

Jump to:
- [Check User Credentials](#check-user-credentials)
- [Get Presentation Data](#get-presentation-data)
- [Issue Credentials](#issue-credentials)

---

### Check User Credentials
`/hasMatchingCredentials`
> Check if a user has matching <Tip type="credential">credentials</Tip>. If so, a <Tip type="request"/> is created to get the user's consent to share the data via a <Tip type="presentation">presentation</Tip>.

You need to provide:

1. credential request(s)

A (credential requests) encodes which <Tip type="credential">credentials</Tip> you're asking the user to include in a presentation. It's a list of one or more [`CredentialRequest`](https://docs.unumid.co/types/interfaces/credentialrequest.html) objects (defined in the [Unum ID generic types project](https://github.com/UnumID/types/blob/00ba819e661e2856ba9909923ac6f083b9a15e85/index.d.ts#L113-L117)):

```typescript title="CredentialRequest"
{
  type: string; // the type of credential data being requested
  issuers: string[]; // list of acceptable brandIds; if empty, all issuer brands are valid
  required?: boolean; // if credential is required (default is true)
}
```

If you list multiple <Tip type="issuer">issuers</Tip>, the user can include a credential issued by *any one* of those listed.

2. user's email or phone

:::caution
The same ApiKey necessary to call /hasMatchingCredentials grants you and only you access to the encrypted credential data. Please keep this key secure.
:::

#### Request Body
```typescript
credentialRequests: CredentialRequest[], // a list of one or more CredentialRequest objects. Encodes which credentials should be included in presentation that responds to PresentationRequest.
email?: string, // user's email address; optional if phone is provided
phone?: string, // user's phone number; optional if email is provided
```

#### Response Body: [`PresentationRequestPostDto`](https://docs.unumid.co/types/interfaces/presentationrequestpostdto.html)
```typescript title="PresentationRequestPostDto"
{
  "match": boolean // indicates whether the user has matching credentials
  "url": string // Unum ID Web Wallet url to redirect user to for presentation request handling. It will redirect back to your client. Only present if match is true. 
}
```

---

### Get Presentation Data
> Get verified <Tip type="presentation"/> data shared by <Tip type="subject"/>.

When subjects respond to presentations requests the encrypted data is sent, verified and stored in the Verifier Service. This interface gives you access to the decrypted data the user shared.

You need to provide:

1. the presentation's `uuid` that was returned to your client via your callback handler.

:::important
Unum ID only ever stores encrypted presentation data and is deleted after 5 minutes of the corresponding Verifier doing the initial data retrieval.
:::

#### Request Body
```typescript
"uuid": string, // uuid of the encrypted presentation data to retrieve
```

#### Response Body: [`DecryptedPresentation`](https://docs.unumid.co/server-sdk-typescript/interfaces/decryptedpresentation.html)
```typescript title="DecryptedPresentation"
{
  "isVerified": boolean; // whether the presentation is valid
  "type": 'VerifiablePresentation' | 'DeclinedPresentation' // type of presentation. DeclinedPresentation means user declined request and the submitted presentation's VerifiableCredential attribute was undefined or an empty array.
  "presentation": Presentation, // decrypted Presentation object
  "message"?: string; // (optional) included if isVerified is false. Explains why verification failed.
}
```

You can decide what to do with the result of the verification. We recommend using the Server SDK's `extractCredentialData` to facilitate getting the data from the presentation.

---

### Issue Credentials

---