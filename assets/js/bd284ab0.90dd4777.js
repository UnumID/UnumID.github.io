(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{82:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return a})),t.d(n,"metadata",(function(){return l})),t.d(n,"toc",(function(){return s})),t.d(n,"default",(function(){return d}));var i=t(3),o=t(7),r=(t(0),t(90)),a={id:"mobile-sdk-ios",title:"Mobile SDK - iOS",sidebar_label:"iOS",slug:"/mobile-sdk-ios"},l={unversionedId:"mobile-sdk-ios",id:"mobile-sdk-ios",isDocsHomePage:!1,title:"Mobile SDK - iOS",description:"Import the SDK",source:"@site/docs/mobile-sdk-ios.mdx",slug:"/mobile-sdk-ios",permalink:"/mobile-sdk-ios",version:"current",sidebar_label:"iOS",sidebar:"sidebar",previous:{title:"Mobile SDK - Android",permalink:"/mobile-sdk-android"},next:{title:"Demo Mobile Apps",permalink:"/demo-mobile-apps"}},s=[{value:"Import the SDK",id:"import-the-sdk",children:[]},{value:"SDK Setup",id:"sdk-setup",children:[{value:"Access to current ViewController",id:"access-to-current-viewcontroller",children:[]},{value:"Initialization",id:"initialization",children:[]},{value:"Deeplinks",id:"deeplinks",children:[]},{value:"QR Code scanning",id:"qr-code-scanning",children:[]},{value:"SDK Logging",id:"sdk-logging",children:[]},{value:"SDK Callback",id:"sdk-callback",children:[]}]}],c={toc:s};function d(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(i.a)({},c,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("h3",{id:"import-the-sdk"},"Import the SDK"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"todo: how are we going to distribute? probably with cocoa pods?")),Object(r.b)("h4",{id:"infoplist"},"Info.plist"),Object(r.b)("p",null,"Descriptions for the following items will need to be added to the Info.plist"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Privacy - Camera Usage Description ( used for QR code scanner)"),Object(r.b)("li",{parentName:"ul"},"Privacy - Face ID Usage Description ( used for private key generation and storage)"),Object(r.b)("li",{parentName:"ul"},"URL types - the deeplink schemes the host app should handle")),Object(r.b)("h2",{id:"sdk-setup"},"SDK Setup"),Object(r.b)("h3",{id:"access-to-current-viewcontroller"},"Access to current ViewController"),Object(r.b)("p",null,"The SDK does need access to the current View Controller in order to show alert dialogs to the user. The current View Controller should always be passed to the SDK."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"UnumPresenterHelper.currentViewController = viewController\n")),Object(r.b)("h3",{id:"initialization"},"Initialization"),Object(r.b)("p",null,"After a user has successfully log in to the host app, and initialization call should be made to the SDK. The host app should store a reference to the user DID so that it can be passed to the initialization call. If a DID is not provided a new one will be created and returned."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},'let userDid = {retreive user DID}\nlet config = UnumInitializationConfiguration(customerId: BuildConfig.CustomerId, \napiKey: BuildConfig.ApiKey, \ndid: userDid, // returning user DID if available\nonError: {}, // optional on error logic can be performed by the host app\nauthorizeRecoveryFromBackup: {  } // optional logic to be run when restoring from backup\n)\n\nclassInitializationCallback: UnumCallback {\n    internal init(_ parent: MainView) {\n        self.parent = parent\n    }\n    \n    let parent: MainView\n    func onSuccess(data: String?) {\n        // returned data will be the user DID if a new one was created\n    }\n\n    func onSDKError(error: String?) {\n        print("SDK Error: \\(error ?? "")")\n    }\n\n    func onAPIError(code: Int, error: String?) {\n        print("API Error \\(error ?? "")")\n    }\n}\nUnumID.initialize(configuration: config, callback: InitializationCallback(self))\n')),Object(r.b)("h3",{id:"deeplinks"},"Deeplinks"),Object(r.b)("p",null,"When a deeplink is received by the application, it can be passed the SDK to be processed. The app developer is responsible for setting up the application to receive the appropriate deeplink schemas, and can optionally add logic to determine if the deeplink should be sent to the SDK."),Object(r.b)("p",null,"Example code to send deeplink to SDK in SceneDelegate"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"func scene(_ scene: UIScene, openURLContexts URLContexts: Set<UIOpenURLContext>) {\n    for context in URLContexts {\n        UnumID.acceptDeepLink(link: context.url.absoluteString)\n    }\n}\n")),Object(r.b)("h3",{id:"qr-code-scanning"},"QR Code scanning"),Object(r.b)("p",null,"Scanned QR codes can be processed by the SDK in two ways. If the host app already has a way of scanning QR codes, simple pass the scanned code to the SDK."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"UnumID.acceptDeepLink(link: scannedCode)\n")),Object(r.b)("p",null,"If there is not already a way of scanning QR codes, there is a QR code scanner provided by the SDK. This scanner will automatically pass the scanned code to the SDK. "),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"var  scannerSheet: some  View {\n    UnumCodeScannerView(\n        codeTypes: [.qr],\n        completion: { result in\n            self.isShowingScanner = false\n        }\n    )\n}\n")),Object(r.b)("h4",{id:"example-of-opening-the-qr-code-scanner-with-a-button"},"example of opening the QR code scanner with a button"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},'@State  var  isShowingScanner = false\n\n\nButton(action: {\n    self.isShowingScanner = true\n}) {\n    Text("Scan QR Code")\n    .font(.headline)\n    .foregroundColor(.white)\n    .padding(.all)\n    .frame(width: 300, height: 50)\n    .background(Color.blue)\n    .cornerRadius(15.0)\n}.sheet(isPresented: $isShowingScanner) {\n    self.scannerSheet\n}\n')),Object(r.b)("h3",{id:"sdk-logging"},"SDK Logging"),Object(r.b)("p",null,"The SDK provides a way or turning internal logging on or off. This will allow the developer to either show or hide SDK log messages. The Log message level can also be set."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"UnumID.log.enabled = true\nUnumID.log.level = .debug\n")),Object(r.b)("h3",{id:"sdk-callback"},"SDK Callback"),Object(r.b)("p",null,"Many of the SDK functions allow an optional callback method to be passed (as shown in the initialization call above). This will allow the developer to be notified if a call succeeds, or if it encounters an error along with error details."))}d.isMDXComponent=!0}}]);