(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{79:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return s})),t.d(n,"metadata",(function(){return r})),t.d(n,"toc",(function(){return l})),t.d(n,"default",(function(){return c}));var o=t(3),i=t(7),a=(t(0),t(94)),s={id:"web-sdk",title:"Web SDK",sidebar_label:"Web SDK",slug:"/web-sdk"},r={unversionedId:"web-sdk",id:"web-sdk",isDocsHomePage:!1,title:"Web SDK",description:"SDK which helps the client to manage how deeplink can be presented to holder",source:"@site/docs/web-sdk.mdx",slug:"/web-sdk",permalink:"/web-sdk",version:"current",sidebar_label:"Web SDK",sidebar:"sidebar",previous:{title:"Reference Mobile Apps",permalink:"/reference-mobile-apps"},next:{title:"Developer Demo",permalink:"/developer-demo"}},l=[{value:"Installation",id:"installation",children:[]},{value:"Functionality",id:"functionality",children:[{value:"Creating PresentationRequests",id:"creating-presentationrequests",children:[]},{value:"Displaying deeplinks",id:"displaying-deeplinks",children:[]}]},{value:"API",id:"api",children:[{value:"WidgetHostAndController Component",id:"widgethostandcontroller-component",children:[]}]},{value:"Examples",id:"examples",children:[{value:"Simplest possible use case. Allows the SDK to handle all PresentationRequest creation, and does not provide any additional fallback options.",id:"simplest-possible-use-case-allows-the-sdk-to-handle-all-presentationrequest-creation-and-does-not-provide-any-additional-fallback-options",children:[]},{value:"Allows the SDK to handle PresentationRequest creation and enables fallback options",id:"allows-the-sdk-to-handle-presentationrequest-creation-and-enables-fallback-options",children:[]},{value:"Allows your application more control over when the initial PresentationRequest is created. Enables fallback options.",id:"allows-your-application-more-control-over-when-the-initial-presentationrequest-is-created-enables-fallback-options",children:[]},{value:"In an application using Redux or another flux-like state management library",id:"in-an-application-using-redux-or-another-flux-like-state-management-library",children:[]},{value:"Minimum Requirements",id:"minimum-requirements",children:[]},{value:"TypeScript support",id:"typescript-support",children:[]}]}],p={toc:l};function c(e){var n=e.components,t=Object(i.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},p,t,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,"SDK which helps the client to manage how deeplink can be presented to holder\nA React-based SDK which helps manage creating and sending PresentationRequests "),Object(a.b)("h2",{id:"installation"},"Installation"),Object(a.b)("p",null,"The Web SDK is currently only available via GitHub, but will be available via the npm/yarn registries soon."),Object(a.b)("p",null,"Using npm:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"npm install @unumid/web-sdk@https://github.com/UnumID/Verifier-Client-SDK.git\n")),Object(a.b)("p",null,"Using yarn:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"yarn add @unumid/web-sdk@https://github.com/UnumID/Verifier-Client-SDK.git\n")),Object(a.b)("p",null,"or add the following to your ",Object(a.b)("inlineCode",{parentName:"p"},"package.json")," and run ",Object(a.b)("inlineCode",{parentName:"p"},"npm/yarn install")),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},'"@unumid/web-sdk": "https://github.com/UnumID/Verifier-Client-SDK.git"\n')),Object(a.b)("h2",{id:"functionality"},"Functionality"),Object(a.b)("h3",{id:"creating-presentationrequests"},"Creating PresentationRequests"),Object(a.b)("p",null,"By default, the Web SDK will create a PresentationRequest as soon as it is rendered, and will periodically regenerate the PresentationRequest (to ensure that it does not expire) until the user shares data or declines the request, or the widget is unmounted. You can use different combinations of props (see below) to choose how much control over PresentationRequest creation you want to have."),Object(a.b)("h3",{id:"displaying-deeplinks"},"Displaying deeplinks"),Object(a.b)("h4",{id:"qr-code"},"QR Code"),Object(a.b)("p",null,"On larger screens such as a desktop monitor or laptop, the Web SDK will default to displaying deeplinks as a QR code to be scanned by a mobile device with your mobile app powered by the Holder SDK."),Object(a.b)("h4",{id:"button"},"Button"),Object(a.b)("p",null,"On mobile devices, the Web SDK will default to displaying deeplinks as a button, which can be tapped to open the deeplink in your mobile app."),Object(a.b)("h4",{id:"fallback-options"},"Fallback options"),Object(a.b)("p",null,"In some situations, neither a QR code nor a button is convenient. The Web SDK offers the following fallback options for sending the deeplink to your mobile app"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"email"),": Sends the user an email containing the deeplink, which they can open on their device. The user's email address is required in order to use this option."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"sms"),": Sends the user an sms containing the deeplink, which they can open on their device. The user's mobile phone number is required in order to use this option."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"push notification")," (coming soon): sends a push notification to the user's device. The user must have push notifications enabled for your mobile app in order to use this option"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"login"),": If your client application doesn't have the information required to use the desired fallback options, we can redirect them to your existing login page."),Object(a.b)("h2",{id:"api"},"API"),Object(a.b)("h3",{id:"widgethostandcontroller-component"},"WidgetHostAndController Component"),Object(a.b)("p",null,"The Web SDK exports a single component, ",Object(a.b)("inlineCode",{parentName:"p"},"WidgetHostAndController")," (TODO: rename to something better)\nThis component encapsulates all of the Web SDK's functionality."),Object(a.b)("h4",{id:"props"},"Props"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"applicationTitle")," (string) ",Object(a.b)("em",{parentName:"p"},"required"),": The name of your Unum ID powered mobile app"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"userInfo")," (",Object(a.b)("inlineCode",{parentName:"p"},"UserInfo"),") ",Object(a.b)("em",{parentName:"p"},"required"),": Information about a logged in user of your application. The Web SDK will use this to determine which fallback options are available. (TODO: this should not be required)"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"presentationRequest")," (",Object(a.b)("inlineCode",{parentName:"p"},"PresentationRequestResponse"),") ",Object(a.b)("em",{parentName:"p"},"optional"),": a ",Object(a.b)("inlineCode",{parentName:"p"},"PresentationRequestResponse")," object, created on your server via the ",Object(a.b)("a",{parentName:"p",href:"https://github.com/UnumID/Server-SDK-TypeScript"},"Server SDK"),". You may provide this prop in combination with setting ",Object(a.b)("inlineCode",{parentName:"p"},"createInitialPresentationRequest")," (below) to ",Object(a.b)("inlineCode",{parentName:"p"},"false")," for more control over when the widget should display a PresentationRequest to the user."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"deeplinkImgSrc")," (string) ",Object(a.b)("em",{parentName:"p"},"optional"),": path to the image to display as a Deeplink button(TODO: this should be required)"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"createInitialPresentationRequest")," (boolean) ",Object(a.b)("em",{parentName:"p"},"optional"),": Whether the widget should immediately call ",Object(a.b)("inlineCode",{parentName:"p"},"createPresentationRequest")," on load. You can combine this with the ",Object(a.b)("inlineCode",{parentName:"p"},"presentationRequest")," prop to gain control over when the initial PresentationRequest is created. By default, it is ",Object(a.b)("inlineCode",{parentName:"p"},"false")," if you provide the ",Object(a.b)("inlineCode",{parentName:"p"},"presentationRequest")," prop and ",Object(a.b)("inlineCode",{parentName:"p"},"true")," if you do not."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"createPresentationRequest")," (",Object(a.b)("inlineCode",{parentName:"p"},"() => Promise<PresentationRequestResponse> | void"),") ",Object(a.b)("em",{parentName:"p"},"optional"),": A function which should call your Server SDK powered backend to create a PresentationRequest. If it returns a value, it is assumed that that value is a ",Object(a.b)("inlineCode",{parentName:"p"},"PresentationRequestResponse"),". If it does not return a value, you must provide the response via the ",Object(a.b)("inlineCode",{parentName:"p"},"presentationRequest")," prop in order for the widget to display the PresentationRequest. (As in a redux application, where ",Object(a.b)("inlineCode",{parentName:"p"},"createPresentationRequest")," will probably be an async action creator of some sort.) The widget will call this function on an interval in order to ensure that it never displays an expired PresentationRequest (TODO: this should be required)"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"sendEmail")," (",Object(a.b)("inlineCode",{parentName:"p"},"(options: EmailOptions) => Promise<SuccessResponse>"),") ",Object(a.b)("em",{parentName:"p"},"optional"),": A function which takes an ",Object(a.b)("inlineCode",{parentName:"p"},"EmailOptions")," object and calls your backend to send a deeplink via email. You may use the ",Object(a.b)("inlineCode",{parentName:"p"},"sendEmail")," function from the Server SDK to send the email, or your own email provider. If this prop is not provided, the Email fallback option  will not be available."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"sendSms")," (",Object(a.b)("inlineCode",{parentName:"p"},"(options: SmsOptions) => Promise<SuccessResponse>"),") ",Object(a.b)("em",{parentName:"p"},"optional"),": A function which takes an ",Object(a.b)("inlineCode",{parentName:"p"},"SmsOptions")," object and calls your backend to send a deeplink via sms. You may use the ",Object(a.b)("inlineCode",{parentName:"p"},"sendSMS")," function from the Server SDK to send the SMS, or your own SMS provider. If this prop is not provided, the SMS fallback option will not be available."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"goToLogin")," (",Object(a.b)("inlineCode",{parentName:"p"},"() => void"),") ",Object(a.b)("em",{parentName:"p"},"optional"),": A function which redirects the user to your existing login page. You should provide this if you are using Unum ID as an additional authentication factor on top of your existing login. If this prop is not provided, the login fallback option will not be available."),Object(a.b)("h2",{id:"examples"},"Examples"),Object(a.b)("h3",{id:"simplest-possible-use-case-allows-the-sdk-to-handle-all-presentationrequest-creation-and-does-not-provide-any-additional-fallback-options"},"Simplest possible use case. Allows the SDK to handle all PresentationRequest creation, and does not provide any additional fallback options."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-tsx"},"import { FC } from 'react';\n\nimport WidgetHostAndController, { PresentationRequestResponse } from '@unumid/web-sdk';\n\nimport deeplinkImgSrc from '../assets/deeplink-button-image.png';\n\nconst App: FC = () => {\n\n  const createPresentationRequest = async (): Promise<PresentationRequestResponse> => {\n    // call your backend to create a PresentationRequest and return the response\n  };\n\n  return (\n    <WidgetHostAndController\n      applicationTitle=\"My Application\"\n      userInfo={{}}\n      createPresentationRequest={createPresentationRequest}\n      deeplinkImgSrc={deeplinkImgSrc}\n    />\n  );\n}\n")),Object(a.b)("h3",{id:"allows-the-sdk-to-handle-presentationrequest-creation-and-enables-fallback-options"},"Allows the SDK to handle PresentationRequest creation and enables fallback options"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-tsx"},"import { FC } from 'react';\n\nimport WidgetHostAndController, {\n  EmailOptions,\n  SmsOptions,\n  PresentationRequestResponse,\n  SuccessResponse\n} from '@unumid/web-sdk';\n\nimport deeplinkImgSrc from '../assets/deeplink-button-image.png';\n\nconst App: FC = () => {\n\n  const createPresentationRequest = async (): Promise<PresentationRequestResponse> => {\n    // call your backend to create a PresentationRequest and return the response\n  };\n\n  const sendEmail = async (options: EmailOptions): Promise<SuccessResponse> => {\n    // call your backend to send a deeplink via email and return the response\n  }\n\n  const sendSms = async (options: SmsOptions): Promise<SuccessResponse> => {\n    // call your backend to send a deeplink via sms and return the response\n  }\n\n  const goToLogin = async (options: EmailOptions): Promise<SuccessResponse> => {\n    // navigate to your login page\n  }\n\n  return (\n    <WidgetHostAndController\n      applicationTitle=\"My Application\"\n      userInfo={{}}\n      createPresentationRequest={createPresentationRequest}\n      deeplinkImgSrc={deeplinkImgSrc}\n      sendEmail={sendEmail}\n      sendSms={sendSms}\n      goToLogin={goToLogin}\n    />\n  );\n}\n")),Object(a.b)("h3",{id:"allows-your-application-more-control-over-when-the-initial-presentationrequest-is-created-enables-fallback-options"},"Allows your application more control over when the initial PresentationRequest is created. Enables fallback options."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-tsx"},"import { FC, useState } from 'react';\n\nimport WidgetHostAndController, {\n  EmailOptions,\n  SmsOptions,\n  PresentationRequestResponse,\n  SuccessResponse\n} from '@unumid/web-sdk';\nimport { PresentationRequestOptions } from '@unumid/types';\n\nimport deeplinkImgSrc from '../assets/deeplink-button-image.png';\n\nconst App: FC = () => {\n  const [presentationRequest, setPresentationRequest] = useState();\n\n  const createPresentationRequest = async (): Promise<PresentationRequestResponse> => {\n    // call your backend to create a PresentationRequest and return the response\n    const options: PresentationRequestOptions = {\n      // customizable PresentationRequest options\n    }\n    const response = await callBackend(options);\n    setPresentationRequest(response)\n  };\n\n  const sendEmail = async (options: EmailOptions): Promise<SuccessResponse> => {\n    // call your backend to send a deeplink via email and return the response\n  }\n\n  const sendSms = async (options: SmsOptions): Promise<SuccessResponse> => {\n    // call your backend to send a deeplink via sms and return the response\n  }\n\n  const goToLogin = async (options: EmailOptions): Promise<SuccessResponse> => {\n    // navigate to your login page\n  }\n\n  return (\n    <WidgetHostAndController\n      applicationTitle=\"My Application\"\n      userInfo={{}}\n      createPresentationRequest={createPresentationRequest}\n      presentationRequest={presentationRequest}\n      createInitialPresentationRequest={false}\n      deeplinkImgSrc={deeplinkImgSrc}\n      sendEmail={sendEmail}\n      sendSms={sendSms}\n      goToLogin={goToLogin}\n    />\n  );\n}\n")),Object(a.b)("h3",{id:"in-an-application-using-redux-or-another-flux-like-state-management-library"},"In an application using Redux or another flux-like state management library"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-tsx"},"import { FC } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport WidgetHostAndController, {\n  EmailOptions,\n  SmsOptions,\n  PresentationRequestResponse,\n  SuccessResponse\n} from '@unumid/web-sdk';\nimport { PresentationRequestOptions } from '@unumid/types';\n\n// import your action creators. We're assuming they have been wrapped into hooks in this example, but your application may be different.\nimport { useActionCreators } from './hooks/actionCreators';\n\nimport deeplinkImgSrc from '../assets/deeplink-button-image.png';\n\nconst App: FC = () => {\n  // these functions can be defined as async action creators using redux-thunk, redux-saga, or other libraries\n  const { createPresentationRequest, sendSms, sendEmail } = useActionCreators();\n  const presentationRequest = useSelector(state => state.presentationRequest);\n  const loggedInUser = useSelector(state => state.loggedInUser);\n\n  const goToLogin = async (options: EmailOptions): Promise<SuccessResponse> => {\n    // navigate to your login page\n  }\n\n  return (\n    <WidgetHostAndController\n      applicationTitle=\"My Application\"\n      userInfo={loggedInUser}\n      createPresentationRequest={createPresentationRequest}\n      presentationRequest={presentationRequest}\n      createInitialPresentationRequest={false}\n      deeplinkImgSrc={deeplinkImgSrc}\n      sendEmail={sendEmail}\n      sendSms={sendSms}\n      goToLogin={goToLogin}\n    />\n  );\n}\n")),Object(a.b)("h3",{id:"minimum-requirements"},"Minimum Requirements"),Object(a.b)("p",null,"The minimum supported version of React is v16.8.0. If you are using an older version of React, you will need to upgrade it to at least v16.8.0 in order to use the Web SDK."),Object(a.b)("h3",{id:"typescript-support"},"TypeScript support"),Object(a.b)("p",null,"The Web SDK is written in TypeScript and exports relevant types. Some types are also pulled from our shared types library, ",Object(a.b)("a",{parentName:"p",href:"https://github.com/UnumID/types"},Object(a.b)("inlineCode",{parentName:"a"},"@unumid/types")),". We recommend adding ",Object(a.b)("inlineCode",{parentName:"p"},"@unumid/types")," as a dependency to ensure full type support between the Web SDK and ",Object(a.b)("a",{parentName:"p",href:"https://github.com/UnumID/Server-SDK-TypeScript"},"Server SDK"),"."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Client reference application")," is available at Git and can be cloned using\n",Object(a.b)("inlineCode",{parentName:"p"},"git clone https://github.com/UnumID/Verifier-Client-SDK-Client-Reference-App.git"),". "))}c.isMDXComponent=!0},94:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return m}));var o=t(0),i=t.n(o);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,i=function(e,n){if(null==e)return{};var t,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var p=i.a.createContext({}),c=function(e){var n=i.a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},u=function(e){var n=c(e.components);return i.a.createElement(p.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return i.a.createElement(i.a.Fragment,{},n)}},b=i.a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(t),b=o,m=u["".concat(s,".").concat(b)]||u[b]||d[b]||a;return t?i.a.createElement(m,r(r({ref:n},p),{},{components:t})):i.a.createElement(m,r({ref:n},p))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,s=new Array(a);s[0]=b;var r={};for(var l in n)hasOwnProperty.call(n,l)&&(r[l]=n[l]);r.originalType=e,r.mdxType="string"==typeof e?e:o,s[1]=r;for(var p=2;p<a;p++)s[p]=t[p];return i.a.createElement.apply(null,s)}return i.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);