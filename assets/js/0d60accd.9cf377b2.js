"use strict";(self.webpackChunkunum_id=self.webpackChunkunum_id||[]).push([[829],{3166:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>H,contentTitle:()=>V,default:()=>K,frontMatter:()=>z,metadata:()=>Y,toc:()=>X});var n=a(7462),i=a(7294),r=a(3905),s=(a(7874),a(106)),l=a(8716),o=a(624),c=a(1190);const m="container__ccj",d="search_dnlB",p="container-grid_gdNR",h="list-card_xwza",u="list-card-skeleton_i4sb",f="list-card-title_cv_5",y="container_Yx8b",k="back_YMET",g="header_qWYl",N="title_tglL",v="subtitle_n5yt",E="section-title_JJIx",b="meta-container_AWlX",S="properties_IZUr",C="property-title_jUnQ",w="properties-container_ik0p",A="property-field_GOOn",x="skeleton-title_nNzQ",j="skeleton-content-md_JFBE",_="skeleton-content-lg_nAnC",I="skeleton-content-xl_AAs6",O="attribute-container_uCHO",L=/(?<=[a-z])(?=[A-Z])|(?<=[A-Z])(?=[A-Z][a-z])/gm,T=e=>e.split(L).join(" "),$=e=>Object.keys(e).reduce(((e,t)=>({...e,[t]:t})),{});function D(e,t){return fetch(e,t).then((e=>{if(e.ok)return e.json();throw new Error(`Http response error: ${e.status}`)}))}function F(){const e="https://schema.verified.inc";return{getSchemas:async()=>await D(`${e}/schema`,{method:"GET",mode:"cors"}),getSchema:async t=>await D(`${e}/schema/${t}`,{method:"GET",mode:"cors"})}}function J(e){let{field:t,value:a}=e;return i.createElement("strong",null,i.createElement("span",{className:"text--capitalize"},T(t),":"),i.createElement("span",{className:"margin-left--sm"},"object"==typeof a&&Array.isArray(a)?i.createElement(i.Fragment,null,a.map((e=>i.createElement("p",{key:e,className:"padding-left--md margin-bottom--sm margin-top--md"},i.createElement("span",null,"- "),i.createElement("span",{className:"text--primary"},e))))):i.createElement("span",{className:"text--primary"},String(a))))}function R(e){let{attribute:t,isLoading:a}=e;return i.createElement("div",{className:"margin-top--md"},i.createElement("h6",{className:`${E} margin-bottom--md`},"Attribute"),(()=>{if(a)return i.createElement("div",{className:O},i.createElement("div",{className:`${x} skeleton`}),i.createElement("div",{className:`${j} skeleton margin-top--lg`}),i.createElement("div",{className:`${_} skeleton margin-top--lg`}),i.createElement("div",{className:`${I} skeleton margin-top--lg`}));if(!t)return null;const e=$(t);return i.createElement("div",{className:`${O} card`},Object.entries(t).map((t=>{let[a,n]=t;return i.createElement("p",null,i.createElement(J,{field:e[a],value:n}))})))})())}function q(e){let{schema:t,isLoading:a}=e;return Object.entries(t.properties).length?i.createElement(i.Fragment,null,i.createElement("h5",{className:`${v} margin-top--lg`},"Properties"),i.createElement("div",{className:w},(()=>{const e=Object.entries(t.properties);return e.length?e.map((e=>{var n,r;let[s,l]=e;const o=$(l),c=t.required.includes(s),m=((null==t||null==(n=t.raw)||null==(r=n.attributes)?void 0:r.attributes)??[]).find((e=>e.key===s));return i.createElement("div",{key:s,className:`${A} table-of-contents__left-border padding-left--lg`},i.createElement("h6",{className:C},i.createElement("span",null,T(s))," - ",i.createElement("i",{className:"text--primary"},c?"Required":"Optional")),i.createElement("div",{className:`${S} table-of-contents__left-border`},Object.entries(l).map((e=>{let[t,a]=e;return i.createElement("div",{key:t},i.createElement(J,{field:o[t],value:a}))})),i.createElement(R,{attribute:m,isLoading:a})))})):null})())):null}function P(e){let{schema:t,onRequestClose:a}=e;const[n,r]=(0,i.useState)(!1),[s,o]=(0,i.useState)(!0),[c,m]=(0,i.useState)(t),d=$(t);return(0,i.useEffect)((()=>{const e=setTimeout((()=>r(!1)),3e3);return()=>{clearTimeout(e)}}),[n]),(0,i.useEffect)((()=>{F().getSchema(t.id).then((e=>{m((t=>({...t,raw:e}))),o(!1)}))}),[t.id]),i.createElement(l.E.div,{key:t.id,className:`${y} --ifm-modal-overlay`,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},i.createElement("div",{className:"margin-top--sm padding--lg"},i.createElement("button",{className:`${k} button button--md button--primary margin-bottom--lg`,onClick:a}),i.createElement("div",{className:g},i.createElement("button",{className:"button button--xs button--secondary",onClick:()=>{navigator.clipboard.writeText(JSON.stringify(c.raw,null,2)),r(!0)}},n?"Copied!":"Copy schema"),i.createElement("h4",{className:N},i.createElement(l.E.span,{layoutId:t.id,className:"margin-right--md",style:{display:"inline-block"}},t.name))),i.createElement("p",null,t.id),i.createElement(l.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.3}},exit:{opacity:0}},i.createElement("div",{className:b},i.createElement(J,{field:d.additionalProperties,value:t.additionalProperties?"yes":"no"}),i.createElement(J,{field:d.type,value:t.type})),i.createElement(q,{schema:c,isLoading:s}))))}function G(e){let[t,a]=e;const{json:n}=a,{$id:i,...r}=n;return[t,{...r,id:t,name:T(i),raw:a}]}const M=(e,t)=>e.toLocaleString().localeCompare(t);function W(e){let{schema:t,onSchemaSelect:a}=e;const n={hidden:{opacity:0},show:{opacity:1},[`selected-${t.id}`]:{backgroundColor:"var(--ifm-color-primary)"},idle:{opacity:1,transition:{duration:0}},exit:{opacity:0}};return i.createElement(l.E.div,{key:t.id,className:h,variants:n,whileHover:{backgroundColor:"var(--ifm-color-primary)"},onClick:()=>a(t),layout:!0},i.createElement(l.E.h3,{layoutId:t.id,className:f},t.name))}function Z(){return i.createElement("div",{className:u})}function B(e){let{schemas:t}=e;const[a,n]=(0,i.useState)(null),[r,s]=(0,i.useState)(""),h=(0,i.useRef)(),[u,f]=(0,i.useState)("auto"),y=(0,o.Y)(h,{amount:"some"}),[k,g]=(0,i.useState)(y),N=Object.entries(t).map(G),v=(0,i.useMemo)((()=>a?`selected-${a.id}`:k?"idle":y?"show":void 0),[a,y,k]);return console.log(v),(0,i.useEffect)((()=>{k||y&&g(!0)}),[y,k]),(0,i.useEffect)((()=>{const e=new ResizeObserver((e=>{f(e[0].contentRect.height)}));return e.observe(h.current),()=>{e.disconnect()}}),[]),i.createElement(l.E.div,{className:m,animate:{height:u,transition:{duration:.2}},layout:!0},i.createElement(l.E.div,{ref:h},i.createElement(l.E.div,{variants:{hidden:{},show:{transition:{staggerChildren:.025}},selected:{},idle:{}},initial:"hidden",animate:v,whileInView:"show",viewport:{once:!0,margin:"-50%"}},i.createElement("input",{className:d,placeholder:"Search for a schema e.g Email Credential",onChange:e=>s(e.target.value)}),i.createElement(l.E.div,{className:p},i.createElement(c.M,null,N.filter((e=>t=>{let[a]=t;return T(a).toLowerCase().indexOf(e.toLowerCase())>=0})(r)).sort(M).map((e=>{let[t,a]=e;return i.createElement(W,{key:t,schema:a,onSchemaSelect:n})}))))),i.createElement(c.M,{initial:!1},a&&i.createElement(P,{schema:a,onRequestClose:()=>n(null)}))))}function U(e){const[t,a]=(0,i.useState)(!0),[n,r]=(0,i.useState)(null);return(0,i.useEffect)((()=>{a(!0),F().getSchemas().then((e=>{r(e),a(!1)}))}),[]),t?i.createElement("div",{className:m},i.createElement("div",{className:p},new Array(28).fill(void 0).map(((e,t)=>i.createElement(Z,{key:t}))))):i.createElement(B,{schemas:n})}const z={id:"schema",title:"Data Schemas",sidebar_label:"Data Schemas",slug:"/schema"},V=void 0,Y={unversionedId:"schema",id:"schema",title:"Data Schemas",description:"Introduction",source:"@site/docs/schema.mdx",sourceDirName:".",slug:"/schema",permalink:"/schema",draft:!1,tags:[],version:"current",frontMatter:{id:"schema",title:"Data Schemas",sidebar_label:"Data Schemas",slug:"/schema"},sidebar:"sidebar",previous:{title:"API",permalink:"/api-overview"},next:{title:"1-Click or Free IDV",permalink:"/1-click-or-free-use-case"}},H={},X=[{value:"Introduction",id:"introduction",level:2},{value:"Schema Definitions",id:"schema-definitions",level:3},{value:"JSON Schema",id:"json-schema",level:4},{value:"Example",id:"example",level:2},{value:"Schema Library",id:"schema-library",level:2}],Q={toc:X};function K(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},Q,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Verified Inc. enables securely sharing verified ",(0,r.kt)("a",{href:"/terminology#credential"},(0,r.kt)(s.Z,{type:"credential",mdxType:"Tip"}))," data amongst network participants. While in theory this data can take any shape, a structured schema must be defined and followed for every credential type for the sake of all network participants."),(0,r.kt)("p",null,"We use ",(0,r.kt)("a",{parentName:"p",href:"https://json-schema.org/"},"JSON Schema")," syntax for data validation purposes via a pre-compiled ",(0,r.kt)("a",{parentName:"p",href:"https://ajv.js.org/guide/why-ajv.html"},"AJV")," engine. This ensures our credential schemas are robust enough to encapsulate any data while still being easily described, displayed, and validated."),(0,r.kt)("h3",{id:"schema-definitions"},"Schema Definitions"),(0,r.kt)("p",null,"You can view all of the Verified Inc. defined credential schemas via ",(0,r.kt)("a",{parentName:"p",href:"https://schema.verified.inc/schema"},"https://schema.verified.inc/schema"),". If you want to know the schema for a particular credential type you can use that same url with the desired credential type in the path. For example, ",(0,r.kt)("a",{parentName:"p",href:"https://schema.verified.inc/schema/EmailCredential"},"https://schema.verified.inc/schema/EmailCredential"),", would yield the EmailCredential's schema information."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"We have this API documented via our public ",(0,r.kt)("a",{parentName:"p",href:"https://api.docs.verified.inc/"},"Postman collection")," documentation under ",(0,r.kt)("strong",{parentName:"p"},"Schema Resolver"),"."),(0,r.kt)("p",{parentName:"admonition"},"It is possible to view the response bodies from ",(0,r.kt)("a",{parentName:"p",href:"https://schema.verified.inc/schema"},"https://schema.verified.inc/schema")," in the browser, but we recommend Postman, which automatically formats the JSON response for human readability.")),(0,r.kt)("admonition",{type:"important"},(0,r.kt)("p",{parentName:"admonition"},"We hope to soon make it possible for you as a ",(0,r.kt)("a",{href:"/terminology#customer"},(0,r.kt)(s.Z,{type:"customer",mdxType:"Tip"}))," to define your own credential schemas. But ",(0,r.kt)("strong",{parentName:"p"},"currently, we Verified Inc. define all credential schemas.")," If you would like a new credential schema for your use case, please let us know and we will gladly define one for you.")),(0,r.kt)("p",null,'We currently are opting to only support what can be referred to as "single attribute atomic credentials". This means that we break data into its simplest form for every credential. This is to provide users a means of selective disclosure for ',(0,r.kt)("a",{href:"/terminology#request"},(0,r.kt)(s.Z,{type:"request",mdxType:"Tip"})),"s with optional fields."),(0,r.kt)("h4",{id:"json-schema"},"JSON Schema"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"/schema")," path will return enriched schema information. Likely the relevant section for your use is the ",(0,r.kt)("inlineCode",{parentName:"p"},"json")," key, which contains the JSON schema definition."),(0,r.kt)("p",null,"Response body from ",(0,r.kt)("a",{parentName:"p",href:"https://schema.verified.inc/jsonSchema/AddressCredential"},"https://schema.verified.inc/jsonSchema/AddressCredential"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example AddressCredential Schema"',title:'"Example',AddressCredential:!0,'Schema"':!0},'{\n    // highlight-start\n    "json": {\n        "$id": "AddressCredential",\n        "additionalProperties": false,\n        "type": "object",\n        "properties": {\n            "address": {\n                "format": "address",\n                "description": "Address in the format of: street, city, iso3166-code postal-code",\n                "examples": [\n                    "10 Downing Street, London, GB-ENG SW1A 2AA",\n                    "307 3rd Ave, Apt #4, San Austin, US-GA 18025-9876"\n                ],\n                "type": "string"\n            }\n        },\n        "required": [\n            "address"\n        ]\n    },\n    // highlight-end\n    "jsonLD": {\n        "@type": "AddressCredential",\n        "address": "schema:address",\n        "@context": "https://schema.unumid.co"\n    },\n    "attributes": {\n        "type": "AddressCredential",\n        "attributes": [\n            {\n                "key": "address",\n                "label": "Address",\n                "comment": "Physical address.",\n                "displayFormat": "Address"\n            }\n        ]\n    }\n}\n')),(0,r.kt)("p",null,"You can instead just use the ",(0,r.kt)("inlineCode",{parentName:"p"},"/jsonSchema")," path to only get that information, e.g. ",(0,r.kt)("a",{parentName:"p",href:"https://schema.verified.inc/jsonSchema/FirstNameCredential"},"https://schema.verified.inc/jsonSchema/FirstNameCredential"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example AddressCredential JSON Schema"',title:'"Example',AddressCredential:!0,JSON:!0,'Schema"':!0},'{\n    "$id": "AddressCredential",\n    "additionalProperties": false,\n    "type": "object",\n    "properties": {\n        "address": {\n            "format": "address",\n            "description": "Address in the format of: street, city, iso3166-code postal-code",\n            "examples": [\n                "10 Downing Street, London, GB-ENG SW1A 2AA",\n                "307 3rd Ave, Apt #4, San Austin, US-GA 18025-9876"\n            ],\n            "type": "string"\n        }\n    },\n    "required": [\n        "address"\n    ]\n}\n')),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Note that each attribute has a ",(0,r.kt)("inlineCode",{parentName:"p"},"description")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"examples")," to help you understand the credential's schema. If you need more detailed information, look at our open source ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/UnumID/schema-sdk"},"schema-sdk")," ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/UnumID/schema-sdk/blob/main/src/formats.ts"},"formats"),".")),(0,r.kt)("h2",{id:"example"},"Example"),(0,r.kt)("p",null,"First, we get the JSON schemas for the ",(0,r.kt)("a",{parentName:"p",href:"https://schema.verified.inc/jsonSchema/AddressCredential"},(0,r.kt)("inlineCode",{parentName:"a"},"AddressCredential")),", ",(0,r.kt)("a",{parentName:"p",href:"https://schema.verified.inc/jsonSchema/FirstNameCredential"},(0,r.kt)("inlineCode",{parentName:"a"},"FirstNameCredential")),", and ",(0,r.kt)("a",{parentName:"p",href:"https://schema.verified.inc/jsonSchema/LastNameCredential"},(0,r.kt)("inlineCode",{parentName:"a"},"LastNameCredential"))," and review their attributes' ",(0,r.kt)("inlineCode",{parentName:"p"},"description"),"s and ",(0,r.kt)("inlineCode",{parentName:"p"},"examples"),"."),(0,r.kt)("p",null,"Next, we construct valid credential bodies, according to the schemas:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"/*The credential data compliant with the Address, FirstName, and LastName Credentials schemas*/\nconst credentialsList: Credentials = [\n  {\n    type: 'AddressCredential',\n    data: {\n      address: '1010 Main St, San Francisco, US-CA 94117',\n    },\n  },\n  {\n    type: 'FirstNameCredential',\n    data: {\n      fullName: 'Richard',\n    },\n  },\n  {\n    type: 'LastNameCredential',\n    data: {\n      fullName: 'Hendricks',\n    },\n  }\n];\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="Example Request Body for Issuing Credentials"',title:'"Example',Request:!0,Body:!0,for:!0,Issuing:!0,'Credentials"':!0},'{\n  "credentials": credentialsList, // a list of one or more Credentials objects\n  "email": "richard.hendricks@pipedpiper.net"\n}\n\n')),(0,r.kt)("h2",{id:"schema-library"},"Schema Library"),(0,r.kt)("p",null,"Next, you can search or select for a schema JSON, see it's properties and attribute, and also copy the schema structure of choice:"),(0,r.kt)(U,{mdxType:"Schemas"}))}K.isMDXComponent=!0}}]);