import React, { useState } from 'react';

export const CollapsableSection = ({ activeId, setActiveId, id, title, children }) => {
    // renders the CollapsableHeader and the content of the CollapsableSection
    // receives the activeId to know if it should be open or closed
    const isActive = activeId === id;
    
   return(
      <>
        <div onClick={() => setActiveId(id)}>
            <h3>{title}</h3>
        </div>
        {isActive && <div>{children}</div>}
      </>
   )
};

export const CollapsableGroup = ({ children }) => {
    // state control for the open CollapsableSection
    const [activeId, setActiveId] = useState(null);
    
   return(
      <>
      {React.Children.map(children, (child, index) => {
         return React.cloneElement(child, { activeId, setActiveId, id: index });
      })}
      </>
   )
};

{/* Example */}
<CollapsableGroup>
    <CollapsableSection title="Title 1">
        #### this section is collapsable
    </CollapsableSection>
    <CollapsableSection title="Title 2">
        #### this section expands when Title 2 is clicked and it collapses when Title 1 is clicked
    </CollapsableSection>
</CollapsableGroup>